You are a Data Scientist with the marketing team at a banking institution. The Marketing Manager has been running phone based marketing campaigns to market the new product which is a bank term deposit. The manager has historical data from marketing campaigns in the past for a similar product. Historical data is available in full.csv dataset. Often, more than one contact to the same client was required, in order to access if the product (bank term deposit) would be ('yes') or not ('no') subscribed.

As the DS in the team, your manager wants you to build an ML based model to predict the likelihood of a customer subscribing to the term deposit. The data dictionary is below.



Input variables:
# bank client data:
1 - age (numeric)
2 - job : type of job (categorical: 'admin.','blue-collar','entrepreneur','housemaid','management','retired','self-employed','services','student','technician','unemployed','unknown')
3 - marital : marital status (categorical: 'divorced','married','single','unknown'; note: 'divorced' means divorced or widowed)
4 - education (categorical: 'basic.4y','basic.6y','basic.9y','high.school','illiterate','professional.course','university.degree','unknown')
5 - default: has credit in default? (categorical: 'no','yes','unknown')
6 - housing: has housing loan? (categorical: 'no','yes','unknown')
7 - loan: has personal loan? (categorical: 'no','yes','unknown')


# related with the last contact of the current campaign:
8 - contact: contact communication type (categorical: 'cellular','telephone')
9 - month: last contact month of year (categorical: 'jan', 'feb', 'mar', ..., 'nov', 'dec')
10 - day_of_week: last contact day of the week (categorical: 'mon','tue','wed','thu','fri')
11 - duration: last contact duration, in seconds (numeric). Important note: this attribute highly affects the output target (e.g., if duration=0 then y='no'). Yet, the duration is not known before a call is performed. Also, after the end of the call y is obviously known. Thus, this input should only be included for benchmark purposes and should be discarded if the intention is to have a realistic predictive model.

^
should all of these be excluded? because none of this is known? 


# other attributes:
12 - campaign: number of contacts performed during this campaign and for this client (numeric, includes last contact)
13 - pdays: number of days that passed by after the client was last contacted from a previous campaign (numeric; 999 means client was not previously contacted)
14 - previous: number of contacts performed before this campaign and for this client (numeric)
15 - poutcome: outcome of the previous marketing campaign (categorical: 'failure','nonexistent','success')


# social and economic context attributes
16 - emp.var.rate: employment variation rate - quarterly indicator (numeric)
17 - cons.price.idx: consumer price index - monthly indicator (numeric)
18 - cons.conf.idx: consumer confidence index - monthly indicator (numeric)
19 - euribor3m: euribor 3 month rate - daily indicator (numeric)
20 - nr.employed: number of employees - quarterly indicator (numeric)

Output variable (desired target):
21 - y - has the client subscribed a term deposit? (binary: 'yes','no')

this model is then to be applied to another set of customers for next campaign



Ask:

For the modelling exercise on the project, we'd be building 2 types of models, i.e. Logistic Regression and Decision Tree. Overall, we'd be having 4 models,
Logistic Regression model - using all the variables (after the data cleaning/pre-processing) in the dataset excluding duration variable, and the target variable
Decision Tree model - using all the variables excluding duration and the target variable
Logistic Regression: with only a handful variables - you choose which ones depending upon the data exploration
Decision Tree model: again, with only a handful variables

1. did you profile sub vs non sub well
2. how did you data exploration and other analysis inform the subset of variable that you picked
3. how did you pick best model usin accuracy and precision and recall
4. are you explianing the model results using the log reg equation and decision tree feature importance




Questions:
1.default imbalanced.. right approach?
2.how do we know when we can just drop a column.. for example contact. i'm not seeing anything meningful from my data exploration. is that a good enough reason? 
3.what about columns like job and month of contact.. where there are tons of variable.. do we use one hot encoding?
4.logistic regression can only take numeric values? so we do one hot encoding. but no such requirement for DT. is that right? 
5. for the animal set in class.. why did we use labelencoding? does that imply its ordinal? does it not matter in this case because our target is categorical?
6.how does logistic regression change prob to binary output? 

hints from class:
we care about false negative. because one additional out reach is not expensive
50x as many rows as columns -> best practice


------------
When i looked at the data, i noticed that we are dealing with a relatively clean and structed set of data

I first did an intial round of data exploration to understand the variables a bit better and the relationship between them if any. A couple things i noticed off the bat was
1. age, typically when we try to identify or associate characteristic to age. it is more common to do this with age group. as people within age group tend to be similar to each other. so i know that i want to create an age group
2. unknown value in categorical data, i want to know the volume of these unknowns
3. i also had some hypothesis based on my business understanding on who will sub or not,so in my second round of data exploration i will be focusing on this

On my second round of analysis, I noticed some data quality issues, like incorrect values and also a heavily imbalanced categorical variable

I was also able to identify some characteristic in those that subbed:
- those contacted in previous campaign are more likely to sub again, and not only that. those were subbed to the previou campagin are highly likely to sub
- as number of contact go up, success rate also decrease, no point in calling someone multiple times because when they told you no they probably already made up their mind
- I group people into age buckets and those 25-34 are most likely to sub and those in age 34-44 are less likely to sub

model selection:

since we have a classification problem here with very structued and labelled data. we will be trying 2 types model, logistic regression and decision tree.

Here's the performance of the model. I think the performance here is not too great. and we will get into why.

- the addition of info did not improve results significantly. as we can see between the results of all vs subset
- logistric regression has beeter precision while decision tree has better recall, so what does this mean


we can also have a look at the coef and the feature importance of each model to understand how they are affecting the model.

Logistic regression (all)

